(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c68ea70"],{"011f":function(e,t,n){"use strict";var a=n("8724"),l=n.n(a);l.a},8724:function(e,t,n){},f794:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAddMenu}},[e._v("\n    "+e._s(e.$t("menu.addRoot"))+"\n  ")]),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.MenusList,border:""}},[n("el-table-column",{attrs:{align:"center",label:"主键",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"left",label:"菜单名称",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.level,(function(t){return n("span",[e._v("|--")])})),e._v(e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"header-center",label:"路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.path)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"header-center",label:"组件"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.component)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"header-center",label:"后端接口url",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.url)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-tag",{attrs:{type:e._f("statusFilter")(a.status)}},[e._v("\n          "+e._s(e._f("statusNameFilter")(a.status))+"\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{on:{click:function(n){return e.handleAddMenu(t)}}},[e._v("\n          "+e._s(e.$t("buttons.add"))+"\n        ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEdit(t)}}},[e._v("\n          "+e._s(e.$t("buttons.edit"))+"\n        ")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDelete(t)}}},[e._v("\n          "+e._s(e.$t("buttons.delete"))+"\n        ")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"Edit Menu":"New Menu"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"formData",attrs:{model:e.Menu,rules:e.rules,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"Menu Name",clearable:""},model:{value:e.Menu.name,callback:function(t){e.$set(e.Menu,"name",t)},expression:"Menu.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"路径",prop:"path"}},[n("el-input",{attrs:{placeholder:"Menu Path",clearable:""},model:{value:e.Menu.path,callback:function(t){e.$set(e.Menu,"path",t)},expression:"Menu.path"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"组件",prop:"component"}},[n("el-input",{attrs:{placeholder:"Menu component",clearable:""},model:{value:e.Menu.component,callback:function(t){e.$set(e.Menu,"component",t)},expression:"Menu.component"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"跳转"}},[n("el-input",{attrs:{placeholder:"Menu redirect",clearable:""},model:{value:e.Menu.redirect,callback:function(t){e.$set(e.Menu,"redirect",t)},expression:"Menu.redirect"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"api url",prop:"url"}},[n("el-input",{attrs:{placeholder:"Menu url",clearable:""},model:{value:e.Menu.url,callback:function(t){e.$set(e.Menu,"url",t)},expression:"Menu.url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"meta icon"}},[n("el-input",{attrs:{placeholder:"Menu meta_icon",clearable:""},model:{value:e.Menu.meta_icon,callback:function(t){e.$set(e.Menu,"meta_icon",t)},expression:"Menu.meta_icon"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"sort"}},[n("el-input",{attrs:{placeholder:"Menu sort"},model:{value:e.Menu.sort,callback:function(t){e.$set(e.Menu,"sort",t)},expression:"Menu.sort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"是否缓存"}},[n("el-switch",{attrs:{"on-value":!0,"off-value":!1},model:{value:e.Menu.meta_nocache,callback:function(t){e.$set(e.Menu,"meta_nocache",t)},expression:"Menu.meta_nocache"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"总是展示"}},[n("el-switch",{attrs:{"on-value":!0,"off-value":!1},model:{value:e.Menu.alwaysshow,callback:function(t){e.$set(e.Menu,"alwaysshow",t)},expression:"Menu.alwaysshow"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"是否隐藏"}},[n("el-switch",{attrs:{"on-value":!0,"off-value":!1},model:{value:e.Menu.hidden,callback:function(t){e.$set(e.Menu,"hidden",t)},expression:"Menu.hidden"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态"}},[n("el-switch",{attrs:{"on-value":!0,"off-value":!1},model:{value:e.Menu.status,callback:function(t){e.$set(e.Menu,"status",t)},expression:"Menu.status"}})],1),e._v(" "),n("el-input",{attrs:{type:"hidden"},model:{value:e.Menu.pid,callback:function(t){e.$set(e.Menu,"pid",t)},expression:"Menu.pid"}})],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n        "+e._s(e.$t("buttons.cancel"))+"\n      ")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmMenu}},[e._v("\n        "+e._s(e.$t("buttons.confirm"))+"\n      ")])],1)],1)],1)},l=[],s=(n("7f7f"),n("55dd"),n("96cf"),n("3b8d")),i=n("ed08"),u=n("b775"),r=n("403a");function o(){return Object(u["a"])({url:"",method:"get",baseURL:r["a"]+"/menu"})}function c(e){return Object(u["a"])({url:"",method:"post",data:e,baseURL:r["a"]+"/menu"})}function d(e,t){return Object(u["a"])({url:"",method:"put",data:t,baseURL:r["a"]+"/menu"})}function f(e){return Object(u["a"])({url:"",method:"delete",data:e,baseURL:r["a"]+"/menu"})}var m={id:"",name:"",path:"",component:"",redirect:"",url:"",meta_title:"",meta_icon:"#",meta_nocache:!0,alwaysshow:!0,meta_affix:!1,hidden:!1,pid:0,sort:"0",status:!0},p={filters:{statusFilter:function(e){var t={1:"success",0:"info"};return t[e]},statusNameFilter:function(e){var t={1:"启动",0:"停止"};return t[e]}},data:function(){var e=this,t=function(t,n,a){""===n?(e.$message({message:t.field+"为必填项",type:"error"}),a(new Error(t.field+"为必填项"))):a()};return{Menu:Object.assign({},m),routes:[],MenusList:[],dialogVisible:!1,dialogType:"new",checkStrictly:!1,rules:{name:[{validator:t}],path:[{validator:t}],component:[{validator:t}],url:[{validator:t}]},defaultProps:{children:"children",label:"title"}}},computed:{routesData:function(){return this.routes}},created:function(){this.getMenus()},methods:{getMenus:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:t=e.sent,this.MenusList=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAddMenu:function(e){var t=this;this.dialogType="new",this.dialogVisible=!0,this.Menu.pid=e.row?e.row.id:0,this.$nextTick((function(){t.$refs["formData"].clearValidate(),t.$refs["formData"].resetFields(),t.Menu.status=!0}))},handleEdit:function(e){var t=this;this.dialogType="edit",this.dialogVisible=!0,this.checkStrictly=!0,this.Menu=Object(i["c"])(e.row),this.Menu.status=1===this.Menu.status,this.Menu.meta_nocache=1===this.Menu.meta_nocache,this.Menu.hidden=1===this.Menu.hidden,this.Menu.alwaysshow=1===this.Menu.alwaysshow,this.$nextTick((function(){t.$refs["formData"].clearValidate()}))},handleDelete:function(e){var t=this,n=(e.$index,e.row);this.$confirm("Confirm to remove the Menu?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f(n.id);case 2:a=0;case 3:if(!(a<t.MenusList.length)){e.next=11;break}if(t.MenusList[a].id!==n.id){e.next=8;break}return n.status=0,t.MenusList.splice(a,1,Object.assign({},n)),e.abrupt("break",11);case 8:a++,e.next=3;break;case 11:t.$message({type:"success",message:"Delete succed!"});case 12:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},confirmMenu:function(){var e=this,t="edit"===this.dialogType;this.$refs["formData"].validate((function(n){if(!n)return!1;t?(e.Menu.sort=String(e.Menu.sort),d(e.Menu.id,e.Menu).then((function(t){for(var n=0;n<e.MenusList.length;n++)if(e.MenusList[n].id===e.Menu.id){e.Menu.status=e.Menu.status?1:0,e.MenusList.splice(n,1,Object.assign({},e.Menu));break}var a=e.Menu,l=a.path,s=a.id,i=a.name;e.dialogVisible=!1,e.$notify({title:"Success",dangerouslyUseHTMLString:!0,message:"\n          <div>Menu Id: ".concat(s,"</div>\n          <div>Menu Name: ").concat(i,"</div>\n          <div>path: ").concat(l,"</div>\n        "),type:"success"})})).catch((function(e){console.log(e)}))):c(e.Menu).then((function(t){e.Menu.id=t.data.id,e.Menu.status=1===t.data.status?1:0,e.Menu.level=e.Menu.level+1,e.MenusList.push(e.Menu);var n=e.Menu,a=n.path,l=n.id,s=n.name;e.dialogVisible=!1,e.$notify({title:"Success",dangerouslyUseHTMLString:!0,message:"\n          <div>Menu Id: ".concat(l,"</div>\n          <div>Menu Name: ").concat(s,"</div>\n          <div>path: ").concat(a,"</div>\n        "),type:"success"})})).catch((function(e){console.log(e)}))}))}}},h=p,v=(n("011f"),n("2877")),M=Object(v["a"])(h,a,l,!1,null,"37c627d2",null);t["default"]=M.exports}}]);